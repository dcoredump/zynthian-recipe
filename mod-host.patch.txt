diff --git a/src/effects.c b/src/effects.c
index 1c3adcb..685129c 100644
--- a/src/effects.c
+++ b/src/effects.c
@@ -2160,7 +2160,7 @@ int effects_preset_show(const char *uri, char **state_str)
 int effects_remove(int effect_id)
 {
     uint32_t i;
-    int j, start, end;
+    int j, start=0, end=MAX_INSTANCES - 10;
     effect_t *effect;
 
     // stop postpone events thread
@@ -2173,26 +2173,29 @@ int effects_remove(int effect_id)
 
     if (effect_id == REMOVE_ALL)
     {
-        /* Disconnect the system connections */
-        for (i = 0; g_capture_ports[i]; i++)
-        {
-            const char **capture_connections =
-                jack_port_get_connections(jack_port_by_name(g_jack_global_client, g_capture_ports[i]));
-
-            if (capture_connections)
+        if(g_capture_ports!=NULL)
+       {
+            /* Disconnect the system connections */
+            for (i = 0; g_capture_ports[i]; i++)
             {
-                for (j = 0; capture_connections[j]; j++)
+                const char **capture_connections =
+                    jack_port_get_connections(jack_port_by_name(g_jack_global_client, g_capture_ports[i]));
+
+                if (capture_connections)
                 {
-                    if (strstr(capture_connections[j], "system"))
-                        jack_disconnect(g_jack_global_client, g_capture_ports[i], capture_connections[j]);
-                }
+                    for (j = 0; capture_connections[j]; j++)
+                    {
+                        if (strstr(capture_connections[j], "system"))
+                            jack_disconnect(g_jack_global_client, g_capture_ports[i], capture_connections[j]);
+                    }
 
-                jack_free(capture_connections);
+                    jack_free(capture_connections);
+                }
             }
-        }
 
-        start = 0;
-        end = MAX_INSTANCES - 10; // TODO: better way to exclude the Tools (10)
+            start = 0;
+            end = MAX_INSTANCES - 10; // TODO: better way to exclude the Tools (10)
+        }
     }
     else
     {

